# AiO-terminal - All-in-One Development Terminal

## 概要
開発に必要な全てを1ウィンドウに統合した軽量デスクトップアプリ。
ターミナル、DBビューア、コードエディタ、ブラウザを自由にペイン配置できる。

## 技術スタック
- **言語:** Rust
- **GUI:** egui (eframe)
- **ターミナル:** portable-pty + vt100/alacritty_terminal
- **エディタ:** tree-sitter (シンタックスハイライト)
- **DB:** tokio-postgres (PgPeek統合)
- **ブラウザ:** wry (WebView)
- **非同期:** tokio

## ターゲット
- macOS (Apple Silicon) メイン
- Linux対応も視野に

## コア機能

### 1. ペインシステム（骨格）
- ウィンドウを自由に水平/垂直分割
- ペインのリサイズ（ドラッグ）
- 各ペインに任意のパネル（ターミナル/エディタ/DB/ブラウザ/ファイルツリー）を配置
- タブで同一ペイン内に複数パネル
- デフォルトレイアウト:
  ```
  +----------+------------------+-----------+
  | ファイル  |    エディタ       | ターミナル |
  | ツリー    |                  |           |
  |          +------------------+-----------+
  |          |   ターミナル / DB / ブラウザ   |
  +----------+----------------------------------+
  ```

### 2. ターミナル（MVP最優先）
- PTYベースのフルターミナルエミュレータ
- ANSI/256色/TrueColor対応
- Claude Code等のインタラクティブCLI動作
- 複数ターミナルインスタンス（タブ）
- フォント: 等幅フォント（設定可能）
- コピー&ペースト

### 3. PgPeek統合（MVP第2優先）
- PgPeekの全機能をペインとして統合
  - 接続プロファイル管理
  - スキーマブラウザ
  - データビュー（ページネーション、ソート、NULL表示、横スクロール）
  - スキーマビュー
  - CSVコピー
  - WHEREフィルタ

### 4. コードエディタ（MVP第3優先）
- テキスト編集（基本操作: カーソル移動、選択、コピペ、Undo/Redo）
- シンタックスハイライト（tree-sitter）
  - 対応言語: Rust, Python, JavaScript/TypeScript, SQL, HTML/CSS, JSON, YAML, Markdown
- 行番号表示
- ファイル保存 (Cmd+S)
- 検索 (Cmd+F)
- ファイルツリーからファイルを開く

### 5. ファイルツリー
- ディレクトリのツリー表示
- ファイルクリックでエディタに開く
- .gitignore 対応（無視ファイル非表示）
- アイコン表示（フォルダ/ファイル種別）

### 6. ブラウザ（MVP第4優先）
- WebView埋め込み（wry）
- URLバー
- localhost:XXX プレビューがメインユースケース
- worktree別: <branch>.localhost 対応
- 戻る/進む/リロード
- DevTools不要（ブラウザ側で確認する想定）

## UI/UX

### テーマ
- ダークテーマ（デフォルト）
- Zedライクな見た目を意識

### キーバインド
- Cmd+T: 新規ターミナルタブ
- Cmd+N: 新規ペイン
- Cmd+W: タブ/ペインを閉じる
- Cmd+S: ファイル保存
- Cmd+F: 検索
- Cmd+P: ファイルを素早く開く（ファジー検索）
- Cmd+1-9: ペイン切り替え

### 設定
- JSON設定ファイル（~/.aio-terminal/config.json）
- フォント、フォントサイズ
- デフォルトレイアウト
- DB接続プロファイル
- テーマカラー

## 非機能要件
- 起動1秒以内
- ターミナル入力のレイテンシ < 16ms
- メモリ使用量 < 200MB（基本使用時）
- 60fps描画

## 開発フェーズ

### Phase 1: 骨格 + ターミナル
- ペインシステム（分割・リサイズ・タブ）
- ファイルツリー（基本）
- ターミナル（PTY + ANSIレンダリング）
- ダークテーマ

### Phase 2: PgPeek統合
- PgPeekのコードをモジュールとして統合
- ペインタイプとして「DB」を追加

### Phase 3: エディタ
- テキスト編集
- tree-sitterでハイライト
- ファイル保存/検索

### Phase 4: ブラウザ
- wryでWebView統合
- URLバー + ナビゲーション

### Phase 5: 磨き
- ファジーファイル検索
- レイアウト保存/復元
- パフォーマンス最適化
